<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 /> 
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui' />
<title>Encuestas</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.3/dist/leaflet.css">
<script type="text/javascript" src="scripts/jquery-3.4.1.js"></script>
<script type="text/javascript" src="http://www.ign.gob.ar/argenmap2/argenmap.jquery/argenmap.jquery.min.js"></script>
<style type="text/css">	
 <!-- html, body {
			height: 100%;
			margin: 0;
		}
	.leaflet-control-attribution.leaflet-control {
			font-size: 20px;
		}-->
		.leaflet-control-attribution.leaflet-control a:hover {color:#800080}
	<!--.logogc{position:absolute;z-index:2;top:5px;right:350px}-->
</style>
<style>
    h1 { color: #4C7A5E;}
</style>	
</head>
<body>
<h1 style="position: absolute; margin-top: 30px; margin-left: 100px; z-index: 2">Encuestas</h1>
<div id="map" class="smallmap" style="height: 100%; z-index: 1"></div>
<script src="https://unpkg.com/leaflet@1.0.3/dist/leaflet.js"></script>
<script type="text/javascript" src="scripts/geojson/Mza_dptos.js"></script>
<script type="text/javascript" src="scripts/geojson/imgnnegativa2019zonas.js"></script>
<script type="text/javascript" src="scripts/geojson/imgnnegativa2020zonas.js"></script>
<script type="text/javascript" src="scripts/geojson/imgnpositiva2019zonas.js"></script>
<script type="text/javascript" src="scripts/geojson/imgnpositiva2020zonas.js"></script>
<script src="scripts/leaflet-tilelayer-wmts.js"></script>
<script>
/*Argenmap*/
var mapabase_argenmap = new L.TileLayer.WMTS( 'https://wms.ign.gob.ar/geoserver/capabaseargenmap/gwc/service/wmts?' ,
                               {
                                   layer: 'capabaseargenmap',
                                   style: "normal",
                                   tilematrixSet: "EPSG:3857",
                                   format: "image/png",
                                   attribution: " <a href='https://www.ign.gob.ar/AreaServicios/Argenmap/IntroduccionV2'> IGN - Argenmap v2 </a>| <a href='https://github.com/mylen/leaflet.TileLayer.WMTS'>GitHub</a>&copy "
                               }
                              );

	/* ICONOS */
		var iconoComun = L.Icon.extend({
			options: {
				shadowUrl: 'hoja-sombra.png',
				iconSize:     [38, 95],
				shadowSize:   [50, 64],
				iconAnchor:   [22, 94],
				shadowAnchor: [4, 62],
				popupAnchor:  [-3, -76]
			}
		});

		var iconoVerde = new iconoComun({iconUrl: 'hoja-verde.png'}),
			iconoRojo = new iconoComun({iconUrl: 'hoja-roja.png'}),
			iconoNaranja = new iconoComun({iconUrl: 'hoja-naranja.png'});

		function crearIconoVerde (feature, latlng) {
			return L.marker(latlng, { icon: iconoVerde })
		}

		function crearIconoRojo (feature, latlng) {
			return L.marker(latlng, { icon: iconoRojo })
		}

		function crearIconoNaranja (feature, latlng) {
			return L.marker(latlng, { icon: iconoNaranja })
		}

		var asignarIconoVerde = {
		  pointToLayer: crearIconoVerde
		}

		var asignarIconoRojo = {
		  pointToLayer: crearIconoRojo
		}

		var asignarIconoNaranja = {
		  pointToLayer: crearIconoNaranja
		}

	/* POPUPS */
		function agregarPopup(feature, layer) { 
			if (feature.properties && feature.properties.categoria) { 
					layer.bindPopup( "<strong>" + feature.properties.categoria+ "</strong>"); 
			} 
		}
		function agregarPopupDistritos(feature, layer) { 
			if (feature.properties && feature.properties.nombre) { 
					layer.bindPopup( "<strong>" + feature.properties.nombre + "</strong>"); 
			} 
		}
		
		function estiloimgnneg() {
			imgn_neg_2019.eachLayer(function(featureInstanceLayer) {
				var id_feature = featureInstanceLayer.feature.properties['id'];
				if (id_feature == 1) {
					color_actual = '#b0d2e8';
				} else if (id_feature == 2) {
					color_actual = '#08306b';
				} else if (id_feature == 3) {
					color_actual = '#3e8ec4';
				} else if (id_feature == 4) {
					color_actual = '#f7fbff';
				}
				featureInstanceLayer.setStyle({
					color: color_actual,fillOpacity: 1.00
				});
			});
		}
        function estiloimpos() {
			imgn_pos_2019.eachLayer(function(featureInstanceLayer) {
				var id_feature = featureInstanceLayer.feature.properties['id'];
				if (id_feature == 1) {
					color_actual = '#fca487';
				} else if (id_feature == 2) {
					color_actual = '#fff5f0';
				} else if (id_feature == 3) {
					color_actual = '#eb362a';
				} else if (id_feature == 4) {
					color_actual = '#67000d';
				}
				featureInstanceLayer.setStyle({
					color: color_actual,fillOpacity: 1.00
				});
			});
		}			
		 function estiloimgnneg2() {
			imgn_neg_2020.eachLayer(function(featureInstanceLayer) {
				var id_feature = featureInstanceLayer.feature.properties['id'];
				if (id_feature == 1) {
					color_actual = '#f7fbff';
				} else if (id_feature == 2) {
					color_actual = '#08306b';
				} else if (id_feature == 3) {
					color_actual = '#3e8ec4';
				} else if (id_feature == 4) {
					color_actual = '#b0d2e8';
				}
				featureInstanceLayer.setStyle({
					color: color_actual,fillOpacity: 1.00
				});
			});
		}	
          function estiloimpos2() {
			imgn_pos_2020.eachLayer(function(featureInstanceLayer) {
				var id_feature = featureInstanceLayer.feature.properties['id'];
				if (id_feature == 1) {
					color_actual = '#67000d';
				} else if (id_feature == 2) {
					color_actual = '#fca487';
				} else if (id_feature == 3) {
					color_actual = '#fff5f0';
				} else if (id_feature == 4) {
					color_actual = '#eb362a';
				}
				featureInstanceLayer.setStyle({
					color: color_actual,fillOpacity: 1.00
				});
			});
		}				
	/* BASE LAYERS */
	var osmUrl = 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',
		osmAttrib = '&copy; <a href="http://openstreetmap.org/copyright">OpenStreetMap</a> contributors',
		mapabase_osm = L.tileLayer(osmUrl, {maxZoom: 20, attribution: osmAttrib});
	var otUrl = 'https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png',
		otAttrib = 'Map data: &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)',
		mapabase_ot = L.tileLayer(otUrl, {maxZoom: 20, attribution: otAttrib});

	/* OVERLAYS Y GRUPOS */
		var 
			Mendoza_ol = L.geoJson(Mza_dptos).setStyle({color:"#A6ACB6",fillOpacity: 0.75})
			imgn_pos_2020 = L.geoJson(imgnpositiva2020zonas,{ onEachFeature: agregarPopup});
			imgn_pos_2019 = L.geoJson(imgnpositiva2019zonas,{ onEachFeature: agregarPopup});
			imgn_neg_2019 = L.geoJson(imgnnegativa2019zonas,{ onEachFeature: agregarPopup});
			imgn_neg_2020 = L.geoJson(imgnnegativa2020zonas,{ onEachFeature: agregarPopup});
			estiloimgnneg(); 
			estiloimgnneg2();
			estiloimpos();
			estiloimpos2();
	/* CREACIÓN DEL MAPA CON BASE LAYERS Y OVERLAYS */
		var map = L.map('map', {
			layers: [Mendoza_ol]
		}).setView([-35.0000, -67.5000],7);
       
	/* CREACIÓN DEL LAYERS CONTROL */
		var baseMaps = {
			"ArgenMap": mapabase_argenmap,
			"OpenTopoMap": mapabase_ot,
		};
		
		var overlayMaps = {
			"Mendoza":Mendoza_ol,
			"Imagen positiva Gobernador 2019":imgn_pos_2019,
			"Imagen positiva Gobernador 2020":imgn_pos_2020,
			"Imagen negativa Gobernador 2019": imgn_neg_2019,
			"Imagen negativa Gobernador 2020": imgn_neg_2020
		    };
	L.control.layers(baseMaps, overlayMaps).addTo(map);
	L.control.scale().addTo(map);
</script>
</body>
</html>
